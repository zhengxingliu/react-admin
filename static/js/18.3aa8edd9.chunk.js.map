{"version":3,"sources":["views/Profile/index.js"],"names":["Profile","connect","state","avatarUrl","user","avatar","change_avator","isUploading","handleUpload","file","setState","data","FormData","append","axios","post","then","res","status","props","thumb","url","catch","err","console","log","error","title","bordered","customRequest","this","showUploadList","spinning","src","alt","style","height","width","Component"],"mappings":"0UAaOA,EADNC,aAJiB,SAAAC,GAAK,MAAK,CAC1BC,UAAWD,EAAME,KAAKC,UAGJ,CAAEC,mB,+MAGpBJ,MAAQ,CACNK,aAAa,G,EAGfC,aAAe,YAAe,IAAZC,EAAW,EAAXA,KAChB,EAAKC,SAAS,CACZH,aAAa,IAEf,IAAMI,EAAO,IAAIC,SACjBD,EAAKE,OAAO,QAASJ,GACrBK,IAAMC,KAAK,qFAAsFJ,GAChGK,MAAK,SAAAC,GACoB,MAApBA,EAAIN,KAAKO,SAEX,EAAKC,MAAMb,cAAcW,EAAIN,KAAKA,KAAKS,MAAMC,KAE7C,EAAKX,SAAS,CACZH,aAAa,QAIlBe,OAAM,SAAAC,GACLC,QAAQC,IAAIF,GAEZ,EAAKb,SAAS,CACZH,aAAa,IAEf,IAAQmB,MAAM,wB,uDAOhB,OACE,uBACEC,MAAM,kBACNC,UAAU,GAFZ,wBAIuB,4BAErB,uBACCC,cAAeC,KAAKtB,aACpBuB,gBAAgB,GAEf,uBAAMC,SAAUF,KAAK5B,MAAMK,aACzB,2BACE,kBAAC,IAAD,MADF,sBAMJ,uBAAMqB,UAAU,GACd,yBAAKK,IAAKH,KAAKX,MAAMhB,UAAW+B,IAAI,UAAUC,MAAO,CAACC,OAAQ,GAAIC,MAAO,Y,GAvD5DC,e,EA8DRtC","file":"static/js/18.3aa8edd9.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport { Upload, Card, Button, Space, Spin, message} from 'antd'\nimport { UploadOutlined } from '@ant-design/icons'\nimport axios from 'axios'\nimport { connect } from 'react-redux'\n\nimport { change_avator } from '../../actions/user'\n\nconst mapStates = state => ({\n  avatarUrl: state.user.avatar\n})\n\n@connect(mapStates, { change_avator })\n class Profile extends Component {\n\n  state = {\n    isUploading: false\n  }\n\n  handleUpload = ({ file }) => {\n    this.setState({\n      isUploading: true\n    })\n    const data = new FormData()\n    data.append('image', file)\n    axios.post('https://api.imgbb.com/1/upload?expiration=600&key=28d25fb724f13c2c82732d5cee60706e', data)\n    .then(res => {\n      if (res.data.status === 200) {\n\n        this.props.change_avator(res.data.data.thumb.url)\n\n        this.setState({\n          isUploading: false\n        })\n      } \n    })\n    .catch(err => {\n      console.log(err)\n\n      this.setState({\n        isUploading: false\n      })\n      message.error('Failed to upload')\n\n    })\n  }\n  \n  render() {\n\n    return (\n      <Card \n        title='Account Setting'\n        bordered={false}\n      >\n        Edit Profile Picture <Space></Space>\n\n        <Upload \n         customRequest={this.handleUpload}\n         showUploadList={false}\n         >\n          <Spin spinning={this.state.isUploading}>\n            <Button>\n              <UploadOutlined /> Click to Upload\n            </Button>\n          </Spin>\n        </Upload>\n\n        <Card bordered={false}>\n          <img src={this.props.avatarUrl} alt='profile' style={{height: 80, width: 80}}></img>\n        </Card>\n      </Card>\n    )\n  }\n}\n\nexport default Profile"],"sourceRoot":""}